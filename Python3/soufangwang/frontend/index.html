<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="./js/chart.js"></script>
    <script src="./js/jquery.1.11.3.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/datatables.min.js"></script>
    <script src="./js/datatable.bs4.min.js"></script>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/datatables.min.css">
    <link rel="stylesheet" href="./css/datatables.bs4.min.css">
</head>

<body>

    <div class="chart-container" style="position: relative; height:35vh; width:65vw">
        <canvas id="myChart"></canvas>
    </div>

    <div class="chengjiao">
        <table id="chengjiao_tb" class="table table-hover"></table>
    </div>



    <script>
        var dataAvg = {"datasets": [{"label": "\u534e\u6c99\u4e00\u6751", "data": ["34466", "38125", "37942", "37593", "39377", "39296", "38957", "38700", "38576", "37997", "37107", "38573", "38461", "39141", "40376", "40093", "39466", "39176", "38977", "38615", "38120", "37782", "38339", "36267", "35599", "34939", "32288", "32611", "31108", "31039", "32105", "32362", "32822", "33865", "34574", "35229"], "backgroundColor": "#FF6384", "borderColor": "#FF6384", "fill": false}, {"label": "\u56ed\u897f\u4e00\u5c45", "data": ["41272", "39800", "40344", "40152", "40111", "40593", "40900", "41748", "41187", "40920", "40109", "42743", "39766", "41818", "43280", "42977", "42306", "41997", "41785", "41399", "40869", "40055", "39325", "38738", "35799", "35773", "35065", "35416", "35190", "34924", "35745", "35973", "36560", "37729", "38463", "38490"], "backgroundColor": "#36A2EB", "borderColor": "#36A2EB", "fill": false}, {"label": "\u4e34\u4e30\u5c0f\u533a", "data": ["35681", "39610", "39016", "39208", "40766", "40723", "40368", "40678", "40433", "40282", "39955", "39996", "39623", "39614", "38510", "38239", "37640", "37363", "37172", "36826", "36353", "36139", "35205", "34771", "33747", "32655", "32530", "32855", "31859", "32395", "31624", "32958", "32928", "32720", "32992", "32817"], "backgroundColor": "#9C27B0", "borderColor": "#9C27B0", "fill": false}, {"label": "\u9752\u590f\u5c0f\u533a", "data": ["34506", "39347", "39428", "39294", "42363", "43022", "43729", "44271", "43512", "41059", "39791", "40485", "42295", "41685", "35915", "36290", "36929", "37456", "37815", "38177", "38573", "37234", "36447", "36029", "34655", "33972", "33773", "34111", "34067", "36767", "34445", "34820", "36935", "35076", "35943", "34605"], "backgroundColor": "#673AB7", "borderColor": "#673AB7", "fill": false}, {"label": "\u4e0a\u6d66\u5c0f\u533a", "data": ["34637", "35537", "36497", "37592", "37684", "37602", "37367", "38145", "37549", "37032", "38746", "39369", "38724", "39643", "33384", "33731", "34324", "34811", "35144", "35479", "35846", "34928", "35074", "34622", "33722", "32147", "30786", "31094", "30834", "30810", "31557", "31822", "31388", "31804", "32089", "32794"], "backgroundColor": "#3F51B5", "borderColor": "#3F51B5", "fill": false}], "labels": ["16/10/01", "16/11/01", "16/12/01", "17/01/01", "17/02/01", "17/03/01", "17/04/01", "17/05/01", "17/06/01", "17/07/01", "17/08/01", "17/09/01", "17/10/01", "17/11/01", "17/12/01", "18/01/01", "18/02/01", "18/03/01", "18/04/01", "18/05/01", "18/06/01", "18/07/01", "18/08/01", "18/09/01", "18/10/01", "18/11/01", "18/12/01", "19/01/01", "19/02/01", "19/03/01", "19/04/01", "19/05/01", "19/06/01", "19/07/01", "19/08/01", "19/09/01"]};
        var result = {
            "items": [[1,1,1],[2,2,2],[3,3,3]],
            "labels": [{'title': 'A'},{'title': 'B'},{'title': 'C'}]
        }
        var drawChnegjiaoTable = function(result) {
            $('#chengjiao_tb').DataTable({
                data: result.items,
                columns: result.labels
            });
        }
        var drawChart = function (data) {
            var ctx = document.getElementById('myChart').getContext('2d');
            var chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'line',
                // The data for our dataset
                data: {
                    labels: data.labels,
                    datasets: data.datasets
                },
                // Configuration options go here
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Historical price overview',
                        fontSize: 18
                    },
                    legend: {
                        labels: {
                            fontSize: 18
                        }
                    },
                    tooltips: {
                        mode: 'index',
                        intersect: false,
                        titleFontSize: 16,
                        bodyfontSize: 18
                    },
                    hover: {
                        mode: 'nearest',
                        intersect: true
                    },
                    scales: {
                        xAxes: [{
                            display: true,
                            ticks: {
                                fontSize: 18
                            },
                            fontSize: 18,
                            scaleLabel: {
                                display: true,
                                labelString: 'Timeline',
                                fontSize: 18
                            }
                        }],
                        yAxes: [{
                            display: true,
                            ticks: {
                                fontSize: 18
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Price',
                                fontSize: 18
                            }
                        }]
                    }
                }
            });
        };
        drawChart(dataAvg);
        drawChnegjiaoTable(result);
    </script>
</body>

</html>